<!--
    file shows index page of all available events to user
-->

<!DOCTYPE html>
<html lang="en">

<head>
    <%- include('../partials/head.ejs'); %>
</head>

<header>
    <%- include('../partials/header.ejs'); %>
</header>

<main class="container mt-5">
    <block class="title-block">
        <!-- title section -->
        <h1><%= title %></h1>
        <p>
            See all events on Eventeny below.
        </p>
        <hr>
    </block>

    <!-- body section -->
    <body>
        <!--function to convert the time to am/pm-->
        <% function timeAmPm(str) { %>
            <% let hr = str.slice(0,3) %>
            <% let ampm = hr >= 12 ? 'pm': 'am' %>
            <% hr = hr % 12; %>
            <% hr = hr ? hr:12; %>
            <% let strTime = hr + ':' + str.slice(3,6) + ' ' + ampm %>
            <% return strTime %>
        <% } %>

        <!--to access a property of the object in array, reference array index and property key-->
        <!--iterate over the array and print all values using a forEach-->
        <% for (let i = 0; i < model.length; i++) { %>
            <% const e = model[i]%>
            <!--function to convert the time to am/pm-->
            <div>
                <h5><%= e.title %></h5>
                <ul>
                    <li>Description: <%= e.description %></li>
                    <li>Venue Name: <%= e.venueName %></li>
                    <li>Address: <%= e.street%>, <%= e.city%>, <%= e.state %> <%= e.zipcode %> <%= e.country%></li>
                    <li>Start Date: <%= e.startDate.toDateString() %> <%= timeAmPm(e.startTimef)%></li>
                    <li>End Date: <%= e.endDate.toDateString() %> <%= timeAmPm(e.endTimef)%></li>  
                </ul>
            </div>

            <!--insert hyperlink to view more-->
            <form action="/events/details">
                <input type="submit" value="View Event" class="btn btn-secondary mb-3" />
            </form>
            <hr>
        <% }; %>

    </body>

</main>

<footer>
    <%- include('../partials/footer.ejs'); %>
</footer>

</html>